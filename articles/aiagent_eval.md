---
title: "AIエージェントのテスト・評価方法を考えてみた"
emoji: "🦾"
type: "tech"
topics: ["ai", "aiエージェント", "autogen", "test", "評価"]
published: true
published_at: 2025-09-30 06:00
publication_name: "secondselection"
---

## はじめに

現在、私はautogenを用いたマルチエージェントシステムの構築に取り組んでいます。
AIエージェントに関する話題は多くありますが、実際に構築を進める中でさまざまな課題に直面しました。
詳しくは後述しますが、主な課題は「エージェントが期待どおりに動かない」点です。
そこで、課題に対応するための評価方法を検討し、エージェントごとの評価指標を設けて客観的な評価をすることにしました。
これにより、問題の所在を明確にし、効率的な改善につなげることを期待しています。
本記事では、ディベートをするマルチエージェントシステムを題材に、エージェントの設計方法について記載します。
ディベートのテーマは「テレビCMとYouTube広告のどちらが有効か」とします。

:::details autogenとは
Microsoftが開発したAIエージェント開発フレームワークです。

:::

詳細については下記記事を参照ください。

https://zenn.dev/secondselection/articles/ai_articles_generator

## マルチエージェントシステムについて

ここで一度マルチエージェントシステムについておさらいします。
シングルエージェントの集まりをマルチエージェントと言います。

![alt text](/images/single.png)
画像のような単一のエージェントのことをシングルエージェントと言います。
ツールが用意されている場合、エージェントはツールを利用することが出来ます。
今回は議論の内容を整理し、適切な進行をしてほしいので、議論を記録しておくツールを用意しました。

![alt text](/images/mulch.png)
司会者、テレビ局の社長、人気YouTuber、消費者の4つのエージェントを用意しました。
エージェント同士が協同してディベートをするイメージです。
ディベートの際に司会者が進行ではなく、議論に参加するなどの行為をするとディベートがうまくいきません。
このようにマルチシステムがうまく動作するにはシングルエージェントが正しく動作する前提を必要とします。
エージェントは人間におきかえて考えると効果的です。

### エージェントごとの所持ツール

今回の設計でエージェントごとに与えるツールを整理します。司会者には議論記録ツール、それ以外にはWeb検索ツールを与えます。

| ツール名                 | テレビ局の社長 | 人気YouTuber         | 消費者代表（子育て主婦） | 司会者 |
|---------------------------|----------------|----------------------|---------------------------|---|
| Web検索ツール       | ✅              |      ✅                |       ✅                    | ×|
| 議論記録ツール           | ×              |     ×                 |      ×                     | ✅|

### シングルエージェントの評価(ツールなし)

評価をしやすくするためにツール利用と、ツールなしで評価は分けます。この段階ではエージェントが与えられた人格に従って発言が出来ているかを評価します。

### シングルエージェントの評価(ツールあり)

こちらでは文脈に沿って適切なツールを利用できているかを評価します。例えば司会者エージェントは、議論が長くなってきた時に議論保存ツールを利用することが期待されます。

### マルチエージェントの評価

マルチエージェントシステムの評価指標、注意する点について記載予定です。

## おわりに

今回考えた評価方法、テスト方法のまとめと現在の評価方法の懸念点を記載し、ブラッシュアップしていく予定ということを書く予定です。
